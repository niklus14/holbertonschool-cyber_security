#!/bin/bash
whois "$1" | awk '/^(Registrant|Admin|Tech)/{s=$1;e=0} s&&!e&&/ Name:/{sub(/.*: /,"");print s" Name, "$0} s&&!e&&/ Organization:/{sub(/.*: /,"");print s" Organization, "$0} s&&!e&&/ Street:/{sub(/.*: /,"");print s" Street, "$0} s&&!e&&/ City:/{sub(/.*: /,"");print s" City, "$0} s&&!e&&/ State\/Province:/{sub(/.*: /,"");print s" State/Province, "$0} s&&!e&&/ Postal Code:/{sub(/.*: /,"");print s" Postal Code, "$0} s&&!e&&/ Country:/{sub(/.*: /,"");print s" Country, "$0} s&&!e&&/ Phone:/{sub(/.*: /,"");print s" Phone, "$0 ORS s" Phone Ext:, "} s&&!e&&/ Fax:/{sub(/.*: /,"");print s" Fax, " ORS s" Fax Ext:, "} s&&!e&&/ Email:/{sub(/.*: /,"");print s" Email, "$0;e=1}' > "$1.csv"
